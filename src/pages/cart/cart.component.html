<section class="cart-sec p-4 m-2 shadow">
  <div class="container">
    <h1 class="text-capitalize fw-bold mb-4">Your Cart</h1>

    <!-- Products Loop -->
    @for (prod of cartderails.products; track $index) {
      <div class="row shadow-sm border bg-white rounded-4 p-4 align-items-center mb-3">

        <!-- Image -->
        <div class="col-12 col-md-2 mb-2 mb-md-0">
          <div class="inner-img">
            <img [src]="prod.product.imageCover" class="w-100 img-fluid rounded-4" [alt]="prod.product.title"  >
          </div>
        </div>

        <!-- Product Details -->
        <div class="col-12 col-md-8 mb-2 mb-md-0">
          <h6 class="fw-semibold mb-1">{{ prod.product.title }}</h6>
          <p class="text-muted mb-2">{{ prod.price | currency : "GBP" }}</p>
          <div class="d-flex align-items-center gap-2">
            <button class="btn btn-outline-dark btn-sm"  (click)="updateQuantity(prod.product._id , prod.count -1)">
              <i class="fa-solid fa-minus"></i>
            </button>
            <span>{{ prod.count }}</span>
            <button class="btn btn-outline-dark btn-sm" (click)="updateQuantity(prod.product._id , prod.count + 1)">
              <i class="fa-solid fa-plus"></i>
            </button>
          </div>
        </div>

        <!-- Delete Button -->
        <div class="col-12 col-md-2 text-md-end text-center">
          <button class="btn b-lg" (click)="deletproduct(prod.product._id)" >
            <i class="fa fa-trash fa-lg fa-xl"></i>
          </button>
        </div>

      </div>
    }

    <!-- Summary -->
    <div class="card shadow-sm rounded-4 p-4 mt-4">
      <h3 class="fw-bold mb-3">
         Summary
      </h3>
      <div class="d-flex justify-content-between mb-2">
        <span class="text-muted">Subtotal</span>
        <span class="text-muted">{{ 0.00 | currency :"GBP" }}</span>
      </div>
      <div class="d-flex justify-content-between mb-2">
        <span class="text-muted">Shipping</span>
        <span class="text-muted">Free</span>
      </div>
      <hr>
      <div class="d-flex justify-content-between fw-bold mb-3">
        <span>Total</span>
        <span>{{ cartderails.totalCartPrice | currency : "GBP" }}</span>
      </div>

      <div class="d-flex flex-column flex-md-row gap-2 flex-wrap  justify-content-center">
         <button class="btn btn-success w-50 mx-auto  rounded-pill" [routerLink]="[ '/checkout' , cartderails._id]" >
          <i class="fas fa-shopping-cart me-2"></i> Checkout
        </button>


                <!-- Delete cart Button -->

        <button class="btn btn-danger w-50 mx-auto  rounded-pill" (click)="clearCart()" >
          <i class="fa fa-trash me-2"></i> Clear Cart
        </button>

      </div>
    </div>

  </div>
</section>
